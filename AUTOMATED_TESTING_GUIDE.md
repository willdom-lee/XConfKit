# XConfKit è‡ªåŠ¨åŒ–æµ‹è¯•æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

XConfKit æä¾›äº†å…¨é¢çš„è‡ªåŠ¨åŒ–æµ‹è¯•å¥—ä»¶ï¼ŒåŒ…æ‹¬åç«¯APIæµ‹è¯•ã€æœåŠ¡å±‚æµ‹è¯•ã€å‰ç«¯ç»„ä»¶æµ‹è¯•ã€é›†æˆæµ‹è¯•ã€æ€§èƒ½æµ‹è¯•å’Œå®‰å…¨æµ‹è¯•ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¿«é€Ÿæµ‹è¯•ï¼ˆæ¨èï¼‰

è¿è¡Œå¿«é€Ÿæµ‹è¯•è„šæœ¬ï¼Œå¿«é€ŸéªŒè¯æ ¸å¿ƒåŠŸèƒ½ï¼š

```bash
./quick_test.sh
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
- âœ… æ£€æŸ¥æœåŠ¡çŠ¶æ€
- âœ… æµ‹è¯•æ‰€æœ‰APIç«¯ç‚¹
- âœ… éªŒè¯æ•°æ®åº“è¿æ¥
- âœ… æµ‹è¯•å‰ç«¯æ„å»º
- âœ… æ€§èƒ½æµ‹è¯•
- âœ… å®‰å…¨æµ‹è¯•

### 2. å®Œæ•´æµ‹è¯•å¥—ä»¶

è¿è¡Œå®Œæ•´çš„è‡ªåŠ¨åŒ–æµ‹è¯•å¥—ä»¶ï¼š

```bash
python run_automated_tests.py
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
- ğŸ”§ åç«¯APIå…¨é¢æµ‹è¯•
- ğŸ”§ åç«¯æœåŠ¡å±‚æµ‹è¯•
- ğŸ”§ å‰ç«¯ç»„ä»¶æµ‹è¯•
- ğŸ”§ é›†æˆæµ‹è¯•
- ğŸ”§ æ€§èƒ½æµ‹è¯•
- ğŸ”§ å®‰å…¨æµ‹è¯•
- ğŸ“Š ç”Ÿæˆè¯¦ç»†æµ‹è¯•æŠ¥å‘Š

## ğŸ“ æµ‹è¯•æ–‡ä»¶ç»“æ„

```
tests/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ test_api_comprehensive.py      # åç«¯APIå…¨é¢æµ‹è¯•
â”‚   â”œâ”€â”€ test_services_comprehensive.py # åç«¯æœåŠ¡å±‚æµ‹è¯•
â”‚   â”œâ”€â”€ test_api.py                    # åŸæœ‰APIæµ‹è¯•
â”‚   â””â”€â”€ test_services.py               # åŸæœ‰æœåŠ¡æµ‹è¯•
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ test_components_comprehensive.test.js  # å‰ç«¯ç»„ä»¶æµ‹è¯•
â””â”€â”€ integration_test.py                # é›†æˆæµ‹è¯•

run_automated_tests.py                 # è‡ªåŠ¨åŒ–æµ‹è¯•è¿è¡Œå™¨
quick_test.sh                          # å¿«é€Ÿæµ‹è¯•è„šæœ¬
pytest.ini                            # pytesté…ç½®
frontend/
â”œâ”€â”€ jest.config.js                     # Jesté…ç½®
â””â”€â”€ src/
    â””â”€â”€ setupTests.js                  # å‰ç«¯æµ‹è¯•è®¾ç½®
```

## ğŸ”§ æµ‹è¯•ç±»å‹è¯¦è§£

### 1. åç«¯APIæµ‹è¯•

**æ–‡ä»¶**: `tests/backend/test_api_comprehensive.py`

**æµ‹è¯•å†…å®¹**:
- å¥åº·æ£€æŸ¥
- è®¾å¤‡ç®¡ç†API (CRUDæ“ä½œ)
- å¤‡ä»½ç®¡ç†API
- ç­–ç•¥ç®¡ç†API
- é…ç½®ç®¡ç†API
- AIåˆ†æAPI
- è‡ªåŠ¨å¤‡ä»½API
- é”™è¯¯å¤„ç†

**è¿è¡Œæ–¹å¼**:
```bash
python tests/backend/test_api_comprehensive.py
```

### 2. åç«¯æœåŠ¡å±‚æµ‹è¯•

**æ–‡ä»¶**: `tests/backend/test_services_comprehensive.py`

**æµ‹è¯•å†…å®¹**:
- è®¾å¤‡æœåŠ¡ (DeviceService)
- å¤‡ä»½æœåŠ¡ (BackupService)
- ç­–ç•¥æœåŠ¡ (StrategyService)
- é…ç½®æœåŠ¡ (ConfigService)
- åˆ†ææœåŠ¡ (AnalysisService)
- æ•°æ®éªŒè¯
- é”™è¯¯å¤„ç†

**è¿è¡Œæ–¹å¼**:
```bash
python tests/backend/test_services_comprehensive.py
```

### 3. å‰ç«¯ç»„ä»¶æµ‹è¯•

**æ–‡ä»¶**: `tests/frontend/test_components_comprehensive.test.js`

**æµ‹è¯•å†…å®¹**:
- è®¾å¤‡ç®¡ç†ç»„ä»¶
- å¤‡ä»½ç®¡ç†ç»„ä»¶
- ç­–ç•¥ç®¡ç†ç»„ä»¶
- ç³»ç»Ÿé…ç½®ç»„ä»¶
- AIåˆ†æç»„ä»¶
- é”™è¯¯å¤„ç†
- è¡¨å•éªŒè¯
- ç”¨æˆ·äº¤äº’

**è¿è¡Œæ–¹å¼**:
```bash
cd frontend
npm test
```

### 4. é›†æˆæµ‹è¯•

**æ–‡ä»¶**: `tests/integration_test.py`

**æµ‹è¯•å†…å®¹**:
- ç«¯åˆ°ç«¯åŠŸèƒ½æµ‹è¯•
- æ•°æ®æµæµ‹è¯•
- ç³»ç»Ÿé›†æˆæµ‹è¯•

**è¿è¡Œæ–¹å¼**:
```bash
python tests/integration_test.py
```

## ğŸ“Š æµ‹è¯•æŠ¥å‘Š

### è‡ªåŠ¨ç”Ÿæˆçš„æŠ¥å‘Š

è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶åï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹æŠ¥å‘Šï¼š

1. **JSONæ ¼å¼æŠ¥å‘Š**: `test_report_YYYYMMDD_HHMMSS.json`
2. **æ§åˆ¶å°è¾“å‡º**: è¯¦ç»†çš„æµ‹è¯•ç»“æœå’Œç»Ÿè®¡ä¿¡æ¯

### æŠ¥å‘Šå†…å®¹

```json
{
  "test_summary": {
    "total_tests": 6,
    "passed": 5,
    "failed": 1,
    "error": 0,
    "timeout": 0,
    "skipped": 0,
    "success_rate": 83.3
  },
  "test_details": {
    "backend_api": {"status": "passed", "details": ["æ‰€æœ‰APIæµ‹è¯•é€šè¿‡"]},
    "backend_services": {"status": "passed", "details": ["æ‰€æœ‰æœåŠ¡å±‚æµ‹è¯•é€šè¿‡"]},
    "frontend_components": {"status": "passed", "details": ["æ‰€æœ‰å‰ç«¯ç»„ä»¶æµ‹è¯•é€šè¿‡"]},
    "integration": {"status": "failed", "details": ["é›†æˆæµ‹è¯•å¤±è´¥"]}
  },
  "execution_time": {
    "start_time": "2025-08-15T10:00:00",
    "end_time": "2025-08-15T10:05:30",
    "duration": 330.5
  }
}
```

## ğŸ¯ æµ‹è¯•è¦†ç›–ç‡

### åç«¯è¦†ç›–ç‡

ä½¿ç”¨pytest-covæ”¶é›†åç«¯ä»£ç è¦†ç›–ç‡ï¼š

```bash
pytest --cov=backend --cov-report=html
```

è¦†ç›–ç‡æŠ¥å‘Šå°†ä¿å­˜åœ¨ `htmlcov/` ç›®å½•ä¸­ã€‚

### å‰ç«¯è¦†ç›–ç‡

ä½¿ç”¨Jestæ”¶é›†å‰ç«¯ä»£ç è¦†ç›–ç‡ï¼š

```bash
cd frontend
npm test -- --coverage
```

è¦†ç›–ç‡æŠ¥å‘Šå°†æ˜¾ç¤ºåœ¨æ§åˆ¶å°å’Œ `coverage/` ç›®å½•ä¸­ã€‚

## ğŸ” æ€§èƒ½æµ‹è¯•

### APIå“åº”æ—¶é—´æµ‹è¯•

è‡ªåŠ¨æµ‹è¯•æ‰€æœ‰APIç«¯ç‚¹çš„å“åº”æ—¶é—´ï¼š

- âœ… ä¼˜ç§€: < 1000ms
- âš ï¸ è‰¯å¥½: 1000-3000ms
- âŒ éœ€è¦ä¼˜åŒ–: > 3000ms

### å¹¶å‘æµ‹è¯•

æµ‹è¯•ç³»ç»Ÿåœ¨é«˜å¹¶å‘æƒ…å†µä¸‹çš„è¡¨ç°ï¼š

```bash
# ä½¿ç”¨abè¿›è¡Œå¹¶å‘æµ‹è¯•
ab -n 1000 -c 10 http://localhost:8000/api/devices/
```

## ğŸ›¡ï¸ å®‰å…¨æµ‹è¯•

### SQLæ³¨å…¥é˜²æŠ¤æµ‹è¯•

æµ‹è¯•ç³»ç»Ÿå¯¹SQLæ³¨å…¥æ”»å‡»çš„é˜²æŠ¤èƒ½åŠ›ï¼š

```python
# æµ‹è¯•payload
"'; DROP TABLE devices; --"
"' OR '1'='1"
"'; SELECT * FROM users; --"
```

### XSSé˜²æŠ¤æµ‹è¯•

æµ‹è¯•ç³»ç»Ÿå¯¹XSSæ”»å‡»çš„é˜²æŠ¤èƒ½åŠ›ï¼š

```python
# æµ‹è¯•payload
"<script>alert('xss')</script>"
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æœåŠ¡æœªè¿è¡Œ**
   ```
   âŒ åç«¯æœåŠ¡æœªè¿è¡Œï¼Œè¯·å…ˆå¯åŠ¨æœåŠ¡
   ```
   **è§£å†³æ–¹æ¡ˆ**: è¿è¡Œ `./start_services.sh`

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   ```
   âŒ æ•°æ®åº“è¿æ¥å¤±è´¥
   ```
   **è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè¿è¡Œ `python restore_simplified_config.py`

3. **å‰ç«¯ä¾èµ–ç¼ºå¤±**
   ```
   âŒ å‰ç«¯ä¾èµ–æœªå®‰è£…
   ```
   **è§£å†³æ–¹æ¡ˆ**: è¿è¡Œ `cd frontend && npm install`

4. **æµ‹è¯•è¶…æ—¶**
   ```
   âŒ æµ‹è¯•æ‰§è¡Œè¶…æ—¶
   ```
   **è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œå¢åŠ è¶…æ—¶æ—¶é—´

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—è¾“å‡ºï¼š

```bash
# åç«¯æµ‹è¯•è°ƒè¯•
python -v tests/backend/test_api_comprehensive.py

# å‰ç«¯æµ‹è¯•è°ƒè¯•
cd frontend
npm test -- --verbose
```

## ğŸ“ˆ æŒç»­é›†æˆ

### GitHub Actions

åœ¨ `.github/workflows/test.yml` ä¸­é…ç½®ï¼š

```yaml
name: Automated Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Run Tests
        run: |
          ./quick_test.sh
          python run_automated_tests.py
```

### æœ¬åœ°CI

åˆ›å»ºæœ¬åœ°æŒç»­é›†æˆè„šæœ¬ï¼š

```bash
#!/bin/bash
# ci.sh
set -e
./quick_test.sh
python run_automated_tests.py
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. æµ‹è¯•å‰å‡†å¤‡

- âœ… ç¡®ä¿æœåŠ¡æ­£åœ¨è¿è¡Œ
- âœ… æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
- âœ… æ¸…ç†æµ‹è¯•æ•°æ®
- âœ… å¤‡ä»½é‡è¦æ•°æ®

### 2. æµ‹è¯•æ‰§è¡Œ

- âœ… å…ˆè¿è¡Œå¿«é€Ÿæµ‹è¯•
- âœ… æ ¹æ®ç»“æœå†³å®šæ˜¯å¦è¿è¡Œå®Œæ•´æµ‹è¯•
- âœ… ä¿å­˜æµ‹è¯•æŠ¥å‘Š
- âœ… åˆ†æå¤±è´¥åŸå› 

### 3. æµ‹è¯•ç»´æŠ¤

- âœ… å®šæœŸæ›´æ–°æµ‹è¯•ç”¨ä¾‹
- âœ… ä¿æŒæµ‹è¯•æ•°æ®åŒæ­¥
- âœ… ç›‘æ§æµ‹è¯•è¦†ç›–ç‡
- âœ… ä¼˜åŒ–æµ‹è¯•æ€§èƒ½

### 4. æŠ¥å‘Šåˆ†æ

- âœ… å…³æ³¨å¤±è´¥ç‡è¶‹åŠ¿
- âœ… åˆ†ææ€§èƒ½å˜åŒ–
- âœ… è¯†åˆ«å®‰å…¨é£é™©
- âœ… åˆ¶å®šæ”¹è¿›è®¡åˆ’

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°æµ‹è¯•é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æµ‹è¯•æ—¥å¿—
2. æ£€æŸ¥æœåŠ¡çŠ¶æ€
3. éªŒè¯é…ç½®æ–‡ä»¶
4. è”ç³»å¼€å‘å›¢é˜Ÿ

---

**æœ€åæ›´æ–°**: 2025å¹´8æœˆ15æ—¥
**ç‰ˆæœ¬**: 1.0.0
